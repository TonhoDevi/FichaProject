<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#4a3728">
    <title>Ficha de Personagem D&D 5e</title>
    
    <!-- Fontes do Google -->
    <link href="https://fonts.googleapis.com/css2?family=Pirata+One&family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <!-- CSS -->
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/variables.css">
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/components.css">
<link rel="stylesheet" href="css/character.css">
<link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>Ficha de Personagem</h1>
            <p>Dungeons & Dragons 5¬™ Edi√ß√£o</p>
        </div>

        <!-- Bot√£o para abrir menu -->
        <button class="menu-toggle" onclick="toggleMenu()" id="menuToggle">
            ‚ò∞ Menu
        </button>

        <!-- Menu lateral -->
        <div class="side-menu" id="sideMenu">
            <button class="menu-close" onclick="toggleMenu()">‚úï</button>
            <div class="controls">
                <button class="btn btn-secondary" onclick="saveCharacter(); toggleMenu()">üíæ Salvar</button>
                <button class="btn btn-danger" onclick="newCharacter()">‚ûï Nova Ficha</button>
                <button class="btn btn-primary" onclick="exportCharacterJSON(); toggleMenu()">üíæ Baixar Ficha (.json)</button>
                <button class="btn btn-secondary" onclick="showLoadModal(); toggleMenu()">üìÇ Carregar</button>
                <button class="btn btn-secondary" onclick="document.getElementById('importFileInput').click(); toggleMenu()">üìÇ Carregar Arquivo (.json)</button>
                <button class="btn btn-primary" onclick="toggleMenu(); window.print() ">üñ®Ô∏è Imprimir Ficha</button>
    
            </div>
        </div>
        <input type="file" id="importFileInput" accept=".json" onchange="importCharacterJSON(event)" style="display: none;">

        <!-- Overlay escuro quando menu aberto -->
        <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>

        <div class="save-indicator" id="saveIndicator">‚úì Salvo automaticamente</div>

                <!-- SISTEMA DE ABAS -->
        <div class="tabs-container">
            <div class="tabs-header">
                <button class="tab-btn active" onclick="switchTab('tab1')">
                    ‚öîÔ∏è Principal
                </button>
                <button class="tab-btn" onclick="switchTab('tab2')">
                    üìú Invent√°rio
                </button>
                <button class="tab-btn" onclick="switchTab('tab3')">
                    ‚ú® Habilidades
                </button>
                <button class="tab-btn" onclick="switchTab('tab4')">
                    üìñ Descri√ß√£o
                </button>
            </div>
        <!-- ABA 1: PRINCIPAL -->
        <div class="tab-content active" id="tab1">
            <div class="sheet-container">
                <!-- Informa√ß√µes B√°sicas -->
                <div class="character-info-grid">
                    <div class="input-group">
                        <label class="input-label">Nome do Personagem</label>
                        <input type="text" id="nomePersonagem" oninput="autoSave()">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Classe e N√≠vel</label>
                        <input type="text" id="classeNivel" placeholder="Ex: Guerreiro 5" oninput="autoSave()">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Nome do Jogador</label>
                        <input type="text" id="nomeJogador" oninput="autoSave()">
                    </div>
                </div>
                <!-- Segunda Linha - Ra√ßa, Tend√™ncia, Antecedente menores -->
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 2fr; gap: 15px; margin-bottom: 20px;">
                    <div class="input-group">
                        <label class="input-label">Ra√ßa</label>
                        <input type="text" id="raca" oninput="autoSave()">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Antecedente</label>
                        <input type="text" id="antecedente" oninput="autoSave()">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Tend√™ncia</label>
                        <input type="text" id="tendencia" oninput="autoSave()">
                    </div>
                    
                    <!-- Bloco de Inspira√ß√£o/Heroico/Profici√™ncia -->
                    <div class="bonus-box">
                        <div class="bonus-item">
                            <input type="checkbox" class="bonus-check" id="inspiracao" onchange="autoSave()">
                            <label class="bonus-label" for="inspiracao">Inspira√ß√£o</label>
                        </div>
                        <div class="bonus-item">
                            <input type="number" class="bonus-value" id="bonusProficiencia" value="1" oninput="calculateModifiers(); autoSave()">
                            <label class="bonus-label">Profici√™ncia</label>
                        </div>
                        <div class="bonus-item">
                            <input type="checkbox" class="bonus-check" id="pontoHeroico" onchange="autoSave()">
                            <label class="bonus-label" for="pontoHeroico">Ponto Heroico</label>
                        </div>
                    </div>
                </div>

                <div class="sheet-grid">
                    <!-- Coluna Esquerda -->
                    <div>
                        <!-- Atributos -->
                        <div class="section">
                            <div class="section-title">Atributos</div>
                            <div class="stats-grid">
                                <div class="stat-box">
                                    <div class="stat-label">For√ßa</div>
                                    <input type="number" class="stat-input" id="forca" value="10" oninput="calculateModifiers(); autoSave()">
                                    <input type="checkbox" class="stat-prof-check" id="profForca" onchange="calculateSavingThrows(); autoSave()">
                                    <div class="stat-value" id="forcaMod">+0</div>
                                    <div class="stat-save" id="forcaSave">+0</div>
                                </div>
                                <div class="stat-box">
                                    <input type="checkbox" class="stat-prof-check" id="profDestreza" onchange="calculateSavingThrows(); autoSave()">
                                    <div class="stat-label">Destreza</div>
                                    <input type="number" class="stat-input" id="destreza" value="10" oninput="calculateModifiers(); autoSave()">
                                    <div class="stat-value" id="destrezaMod">+0</div>
                                    <div class="stat-save" id="destrezaSave">+0</div>
                                </div>
                                <div class="stat-box">
                                    <input type="checkbox" class="stat-prof-check" id="profConstituicao" onchange="calculateSavingThrows(); autoSave()">
                                    <div class="stat-label">Constitui√ß√£o</div>
                                    <input type="number" class="stat-input" id="constituicao" value="10" oninput="calculateModifiers(); autoSave()">
                                    <div class="stat-value" id="constituicaoMod">+0</div>
                                    <div class="stat-save" id="constituicaoSave">+0</div>
                                </div>
                                <div class="stat-box">
                                    <input type="checkbox" class="stat-prof-check" id="profInteligencia" onchange="calculateSavingThrows(); autoSave()">
                                    <div class="stat-label">Intelig√™ncia</div>
                                    <input type="number" class="stat-input" id="inteligencia" value="10" oninput="calculateModifiers(); autoSave()">
                                    <div class="stat-value" id="inteligenciaMod">+0</div>
                                    <div class="stat-save" id="inteligenciaSave">+0</div>
                                </div>
                                <div class="stat-box">
                                    <input type="checkbox" class="stat-prof-check" id="profSabedoria" onchange="calculateSavingThrows(); autoSave()">
                                    <div class="stat-label">Sabedoria</div>
                                    <input type="number" class="stat-input" id="sabedoria" value="10" oninput="calculateModifiers(); autoSave()">
                                    <div class="stat-value" id="sabedoriaMod">+0</div>
                                    <div class="stat-save" id="sabedoriaSave">+0</div>
                                </div>
                                <div class="stat-box">
                                    <input type="checkbox" class="stat-prof-check" id="profCarisma" onchange="calculateSavingThrows(); autoSave()">
                                    <div class="stat-label">Carisma</div>
                                    <input type="number" class="stat-input" id="carisma" value="10" oninput="calculateModifiers(); autoSave()">
                                    <div class="stat-value" id="carismaMod">+0</div>
                                    <div class="stat-save" id="carismaSave">+0</div>
                                </div>
                            </div>
                        </div>

                        <!-- Per√≠cias -->
                        <div class="section">
                            <div class="section-title">Per√≠cias</div>
                            
                            <div class="skills-grid" id="skillsList"></div>
                            
                            <div class="sheet-grid"; style="grid-template-columns: 1fr 1fr;">
                                <div>
                                    <div class="input-group">
                                        <label class="input-label">Percep√ß√£o Passiva</label>
                                        <input type="text" id="percepcaoPassiva">
                                    </div>
                                </div>
                                <div>
                                    <div class="input-group">
                                        <label class="input-label">Intui√ß√£o Passiva</label>
                                        <input type="text" id="intuicaoPassiva">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Coluna Direita -->
                    <div>
                        <!-- Combate -->
                        <div class="section">
                            <div class="section-title">Combate</div>
                            <div class="combat-grid">
                                <div class="input-group">
                                    <label class="input-label">CA</label>
                                    <input type="number" id="ca" value="10" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Iniciativa</label>
                                    <input type="number" id="iniciativa" value="0" oninput="autoSave()">
                                </div>
                                <div class = "input-group">
                                    <label class="input-label">Vida M√°xima</label>
                                    <input type="number" id="pvTotais" value="0" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Vida Atual</label>
                                    <input type="number" id="pvAtuais" value="0" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Vida Tempor√°ria</label>
                                    <input type="number" id="pvTemp" value="0" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Andar</label>
                                    <input type="text" id="deslocAndar" value="30" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Nadar</label>
                                    <input type="text" id="deslocNadar" value="15" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Voar</label>
                                    <input type="text" id="deslocVoar" value="-" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Escalar</label>
                                    <input type="text" id="deslocEscalar" value="15" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Dados de Vida</label>
                                    <input type="text" id="dadosVida" placeholder="1d8" oninput="autoSave()">
                                </div>
                            </div>
                            <!-- Idiomas -->
                            <div class="section">
                                <div class="section-title">Idiomas e Profici√™ncias</div>
                                <textarea id="idiomas" oninput="autoSave()" placeholder="Liste idiomas e profici√™ncias..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-content" id="tab2">
            <div class="sheet-container">
                <!-- Equipamento -->
                <div class="section">
                    <div class="section-title">Equipamento</div>
                    <div class="moedas-grid">
                        <div class="moeda-item">
                            <div class="input-group">
                                <label class="input-label">
                                    <span class="moeda-icon cobre"></span>
                                    PC
                                </label>
                                <input type="number" id="pc" value="0" oninput="autoSave()">
                            </div>
                        </div>
                        <div class="moeda-item">
                            <div class="input-group">
                                <label class="input-label">
                                    <span class="moeda-icon prata"></span>
                                    PP
                                </label>
                                <input type="number" id="pe" value="0" oninput="autoSave()">
                            </div>
                        </div>
                        <div class="moeda-item">
                            <div class="input-group">
                                <label class="input-label">
                                    <span class="moeda-icon electrum"></span>
                                    PE
                                </label>
                                <input type="number" id="pl" value="0" oninput="autoSave()">
                            </div>
                        </div>
                        <div class="moeda-item">
                            <div class="input-group">
                                <label class="input-label">
                                    <span class="moeda-icon ouro"></span>
                                    PO
                                </label>
                                <input type="number" id="po" value="0" oninput="autoSave()">
                            </div>
                        </div>
                        <div class="moeda-item">
                            <div class="input-group">
                                <label class="input-label">
                                    <span class="moeda-icon platina"></span>
                                    PL
                                </label>
                                <input type="number" id="pp" value="0" oninput="autoSave()">
                            </div>
                        </div>
                    </div>
                    <div class="inventory-list" id="inventoryList"></div>
                    <button class="btn btn-secondary" onclick="addInventoryItem()" style="width: 100%; margin-top: 10px;">+ Adicionar Item</button>
                </div>
                <div class="section">
                    <div class="section-title">Tesouro</div>
                    <textarea id="tesouro" oninput="autoSave()" placeholder="Tesouros valiosos..."></textarea>
                </div>
                <div class="section">
                    <div class="section-title">Itens M√°gicos</div>
                    <div class="magic-items-list" id="magicItemsList"></div>
                    <button class="btn btn-secondary" onclick="addMagicItem()" style="width: 100%; margin-top: 10px;">+ Adicionar Item M√°gico</button>
                </div> 
            </div>
        </div>
        <div class="tab-content active" id="tab3">
            <div class="sheet-container">
                <!-- Ataques -->
                <div class="section">
                    <div class="section-title">Ataques</div>
                    <div class="attack-list" id="attackList"></div>
                    <button class="btn btn-secondary" onclick="addAttack()" style="width: 100%; margin-top: 10px;">+ Adicionar Ataque</button>
                </div>

                <!-- Magias -->
                <div class="section">
                    <div class="section-title">Magias</div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div class="input-group">
                            <label class="input-label">Habilidade de Conjura√ß√£o</label>
                            <select id="habilidadeMagia" onchange="updateMagicAtribute(this.value); autoSave()">
                                <option value="">-</option>
                                <option value="forca">FOR√áA</option>
                                <option value="destreza">DESTREZA</option>
                                <option value="constituicao">CONSTITUI√á√ÉO</option>
                                <option value="inteligencia">INTELIG√äNCIA</option>
                                <option value="sabedoria">SABEDORIA</option>
                                <option value="carisma">CARISMA</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label class="input-label">B√¥nus Extra</label>
                            <input type="number" id="extraBonusMagia" value="0" oninput="updateMagicAtribute(document.getElementById('habilidadeMagia').value); autoSave()">
                        </div>
                        <div class="input-group">
                            <label class="input-label">CD de Magia</label>
                            <input type="number" id="cdMagia" value="8" readonly style="background: var(--cor12); font-weight: 700; color: var(--cor19);">
                        </div>
                        <div class="input-group">
                            <label class="input-label">B√¥nus de Ataque</label>
                            <input type="text" id="bonusMagia" value="+0" readonly style="background: var(--cor12); font-weight: 700; color: var(--cor19);">
                        </div>
                    </div>

                    <!-- Truques -->
                    <div class="spell-level-section">
                        <div class="spell-level-header" onclick="toggleSpellLevel('truques')">
                            <div class="spell-level-title">Truques (Cantrips)</div>
                            <button class="spell-expand-btn" id="expandTruques">‚ñº</button>
                        </div>
                        <div class="spell-level-content" id="spellsTruques">
                            <div class="spell-list" id="spellListTruques"></div>
                            <button class="btn btn-secondary" onclick="addSpell('truques')" style="width: 100%; margin-top: 10px;">+ Adicionar Truque</button>
                        </div>
                    </div>

                    <!-- N√≠veis 1-9 -->
                    <div class="spell-slots-grid">
                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel1')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 1</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot1Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot1Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel1">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel1">
                                <div class="spell-list" id="spellListNivel1"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel1')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel2')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 2</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot2Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot2Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel2">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel2">
                                <div class="spell-list" id="spellListNivel2"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel2')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel3')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 3</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot3Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot3Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel3">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel3">
                                <div class="spell-list" id="spellListNivel3"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel3')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel4')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 4</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot4Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot4Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel4">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel4">
                                <div class="spell-list" id="spellListNivel4"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel4')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel5')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 5</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot5Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot5Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel5">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel5">
                                <div class="spell-list" id="spellListNivel5"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel5')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel6')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 6</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot6Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot6Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel6">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel6">
                                <div class="spell-list" id="spellListNivel6"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel6')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel7')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 7</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot7Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot7Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel7">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel7">
                                <div class="spell-list" id="spellListNivel7"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel7')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel8')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 8</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot8Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot8Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel8">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel8">
                                <div class="spell-list" id="spellListNivel8"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel8')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>

                        <div class="spell-level-section">
                            <div class="spell-level-header" onclick="toggleSpellLevel('nivel9')">
                                <div class="spell-level-info">
                                    <span class="spell-level-title">N√≠vel 9</span>
                                    <div class="spell-slots">
                                        <input type="number" class="slot-current" id="slot9Current" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                        <span class="slot-separator">/</span>
                                        <input type="number" class="slot-max" id="slot9Max" value="0" min="0" oninput="autoSave(); event.stopPropagation();" onclick="event.stopPropagation()">
                                    </div>
                                </div>
                                <button class="spell-expand-btn" id="expandNivel9">‚ñº</button>
                            </div>
                            <div class="spell-level-content" id="spellsNivel9">
                                <div class="spell-list" id="spellListNivel9"></div>
                                <button class="btn btn-secondary" onclick="addSpell('nivel9')" style="width: 100%; margin-top: 10px;">+ Adicionar Magia</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-content" id="tab4">
            <div class="sheet-container">
                <!-- Imagem e Descri√ß√£o -->
                <div class="section">
                    <div class="sheet-grid-details">
                        <!-- Coluna Esquerda: Imagem -->
                        <div>
                            <div class="section-title">Imagem do Personagem</div>
                            <div class="character-image-container">
                                <div class="image-preview" id="imagePreview">
                                    <img id="characterImage" src="" alt="Imagem do personagem" style="display: none;">
                                    <div class="image-placeholder" id="imagePlaceholder">
                                        <span class="placeholder-icon">üñºÔ∏è</span>
                                        <span class="placeholder-text">Clique para adicionar imagem</span>
                                    </div>
                                </div>
                                <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                                <div class="image-controls">
                                    <button class="btn btn-secondary" onclick="document.getElementById('imageUpload').click()">
                                        üì§ Escolher Imagem
                                    </button>
                                    <button class="btn btn-danger" onclick="removeCharacterImage()" id="removeImageBtn" style="display: none;">
                                        üóëÔ∏è Remover
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Coluna Direita: Detalhes -->
                        <div>
                            <div class="section-title">Detalhes</div>
                            <div class="combat-grid">
                                <div class="input-group">
                                    <label class="input-label">Idade</label>
                                    <input type="text" id="idade" placeholder="25 anos, Adulto" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Altura</label>
                                    <input type="text" id="altura" placeholder="185cm" oninput="autoSave()">
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Peso</label>
                                    <input type="text" id="peso" placeholder="75kg" oninput="autoSave()">
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label class="input-label">Caracter√≠sticas</label>
                                <textarea id="caracteristicas" oninput="autoSave()" style="min-height: 100px;" placeholder="Calvo, nariz grande, olhos azuis..."></textarea>
                            </div>
                            
                            <div class="combat-grid" style="grid-template-columns: 1fr 1fr;">
                                <div class="input-group">
                                    <label class="input-label">Personalidade</label>
                                    <textarea id="personalidade" oninput="autoSave()" style="min-height: 80px;" placeholder="Tra√ßos de personalidade..."></textarea>
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Ideais</label>
                                    <textarea id="ideais" oninput="autoSave()" style="min-height: 80px;" placeholder="Ideais..."></textarea>
                                </div>
                                <div class="input-group">
                                    <label class="input-label">V√≠nculos</label>
                                    <textarea id="vinculos" oninput="autoSave()" style="min-height: 80px;" placeholder="V√≠nculos..."></textarea>
                                </div>
                                <div class="input-group">
                                    <label class="input-label">Defeitos</label>
                                    <textarea id="defeitos" oninput="autoSave()" style="min-height: 80px;" placeholder="Defeitos..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conhecidos -->
                <div class="section">
                    <div class="section-title">Conhecidos</div>
                    <div class="individuals-list" id="individualsList"></div>
                    <button class="btn btn-secondary" onclick="addIndividual()" style="width: 100%; margin-top: 10px;">+ Adicionar Conhecido</button>
                </div>
                
                <!-- Hist√≥ria -->
                <div class="section">
                    <div class="section-title">Hist√≥ria</div>
                    <textarea id="historia" oninput="autoSave()" style="min-height: 360px;" placeholder="Hist√≥ria do personagem..."></textarea>
                </div>
                
                <!-- Anota√ß√µes -->
                <div class="section">
                    <div class="section-title">Anota√ß√µes</div>
                    <textarea id="anotacoes" oninput="autoSave()" style="min-height: 360px;" placeholder="Anota√ß√µes"></textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Carregar -->
    <div class="modal" id="loadModal">
        <div class="modal-content">
            <h2 class="modal-title">Carregar Personagem</h2>
            <div id="characterList"></div>
            <button class="btn btn-secondary" onclick="hideLoadModal()" style="width: 100%; margin-top: 15px;">Fechar</button>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/spells.js"></script>
    <script src="js/character.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/script.js"></script>
    <script src="js/individuals.js"></script>
</body>
</html>